/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2015
 * @version 1.1.3
 * A dynamic strength meter for password input validation with various configurable options.
 * Inspired from [password meter](http://passwordmeter.com) created by Jeff Todnem. 
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";e.fn.strengthLocales={},String.prototype.strReverse=function(){for(var e="",t=0;t<this.length;t++)e=this.charAt(t)+e;return e};var t=function(){return Math.round((new Date).getTime()+100*Math.random())},r=function(t,r){return null===t||void 0===t||0===t.length||r&&""===e.trim(t)},n=function(e,t){var r=e.$element,n=r.clone(!0).attr("type",t).insertAfter(r);r.remove(),e.$element=n},s=function(e){return 80>=e?0>=e?0:Math.ceil(e/20):5},a=function(e,t){if(r(e))return 0;var n,s,a,l,o,i,c=0,u=0,d=0,g=0,v=0,p=0,h=0,f=0,m=0,b=0,C=0,$=0,k=0,y=0,w=0,T=0,S=0,x=t.midChar,L=t.consecAlphaUC,M=t.consecAlphaLC,A=t.consecNumber,I=t.seqAlpha,V=t.seqNumber,D=t.seqSymbol,q=t.length,N=t.number,O=t.symbol,R=-1,j=-1,B="",U="",E="abcdefghijklmnopqrstuvwxyz",W="01234567890",z=")!@#$%^&*()",G=e.length*q,H=e.length,P="",Q=e.replace(/\s+/g,"").split(/\s*/),F=Q.length;for(l=0;F>l;l++){if(P=Q[l],P.toUpperCase()!==P){-1!==R&&R+1===l&&(m++,k++),R=l,c++;break}for(P.toLowerCase()!==P?(-1!==j&&j+1===l&&(b++,k++),j=l,u++):P.match(/[0-9]/g)?(l>0&&F-1>l&&v++,""!==B&&B+1===l&&(C++,k++),B=l,d++):P.match(/[^\w]/g)&&(l>0&&F-1>l&&v++,""!==U&&U+1===l&&($++,k++),U=l,g++),i=!1,o=0;F>o;o++)Q[l]===Q[o]&&l!==o&&(i=!0,f+=Math.abs(F/(o-l)));i&&(h++,p=F-h,f=Math.ceil(p?f/p:f))}for(n=0;23>n;n++)s=E.substring(n,n+3),a=s.strReverse(),(-1!==e.toLowerCase().indexOf(s)||-1!==e.toLowerCase().indexOf(a))&&(y++,S++);for(n=0;8>n;n++)s=W.substring(n,n+3),a=s.strReverse(),(-1!==e.toLowerCase().indexOf(s)||-1!==e.toLowerCase().indexOf(a))&&(w++,S++);for(n=0;8>n;n++)s=z.substring(n,n+3),a=s.strReverse(),(-1!==e.toLowerCase().indexOf(s)||-1!==e.toLowerCase().indexOf(a))&&(T++,S++);return c>0&&H>c&&(G+=2*(H-c)),u>0&&H>u&&(G+=2*(H-u)),d>0&&H>d&&(G+=d*N),g>0&&(G+=g*O),v>0&&(G+=v*x),(u>0||c>0)&&0===g&&0===d&&(G-=H),0===u&&0===c&&0===g&&d>0&&(G-=H),h>0&&(G-=f),m>0&&(G-=m*L),b>0&&(G-=b*M),C>0&&(G-=C*A),y>0&&(G-=y*I),w>0&&(G-=w*V),T>0&&(G-=T*D),G=0>=G?H>=q?1:0:Math.min(G,100)},l=function(n,s){var l,o=this;e.each(s,function(e,t){o[e]=t}),o.$element=e(n),o.verdicts=o.generateVerdicts(),o.setDefault("toggleClass","kv-toggle"),o.setDefault("meterClass","kv-meter"),o.setDefault("scoreBarClass","kv-scorebar"),o.setDefault("scoreClass","kv-score"),o.setDefault("verdictClass","kv-verdict"),o.setDefault("containerClass","kv-password"),r(o.$element.attr("id"))&&o.$element.attr("id",t()),o.initialValue=r(o.$element.val())?"":o.$element.val(),l=a(o.initialValue,o.rules),o.$container=o.createContainer(),o.$elToggle=o.$container.find(".kv-toggle"),o.$elScorebar=o.$container.find(".kv-scorebar"),o.$elScore=o.$container.find(".kv-score"),o.$elVerdict=o.$container.find(".kv-verdict"),o.$elScoreInput=e(document.createElement("input")).attr("type","hidden").val(l),o.$container.append(o.$elScoreInput),o.paint(l),o.listen()};l.prototype={constructor:l,setDefault:function(e,t){var n=this;r(n[e])&&(n[e]=t)},generateVerdicts:function(){var e,t=this,r=[];for(e=0;6>e;e++)r[e]='<div class="'+t.verdictClasses[e]+'">'+t.verdictTitles[e]+"</div>";return r},listen:function(){var e=this;e.$element.on("keyup",function(t){e.change(t,this.value)}),e.$element.closest("form").on("reset",function(){e.reset()}),e.$elToggle.on("change",function(){e.toggle()})},paint:function(e){var t=this,r=s(e),n=t.verdicts[r];t.$elScore.attr("class",t.scoreClass+" "+t.scoreClass+"-"+r),t.$elScorebar.css("background-position",0-4*e+"px"),t.$elScore.html(e+"%"),t.$elVerdict.html(n)},change:function(e,t){var r=this,n=a(t,r.rules);r.$elScoreInput.val(n),r.paint(n),r.$element.trigger("strength.change")},refresh:function(){var e=this,t=a(e.$element.val(),e.rules);e.$elScoreInput.val(t),e.paint(t)},reset:function(){var e=this,t=a(e.initialValue,e.rules);e.$elScoreInput.val(t),e.paint(t),n(e,"password"),e.$element.trigger("strength.reset")},toggle:function(){var e=this,t=e.$elToggle.is(":checked")?"text":"password";n(e,t),e.$element.trigger("strength.toggle")},score:function(){return this.$elScoreInput.val()},verdict:function(){var e=this.$elScoreInput.val();return s(e)},createContainer:function(){var t,r,n=this,s=n.mainTemplate;return s=s.replace("{input}",n.renderInput()).replace("{meter}",n.renderMeter()),t=e(document.createElement("div")).addClass(n.containerClass).html(s),n.$element.before(t),r=n.$element.detach(),t.find(".kv-temporary-input").before(r).remove(),t},renderToggle:function(){var e=this,t=e.$element.attr("disabled")?' disabled="true"':"",r=e.$element.attr("readonly")?' readonly="true"':"";return'<input type="checkbox" tabindex=10000 class="'+e.toggleClass+'" title="'+e.toggleTitle+'"'+t+r+">"},renderInput:function(){var e=this,t=e.toggleMask?e.inputTemplate:e.inputNoToggleTemplate;return e.$element.removeClass(e.inputClass).addClass(e.inputClass),t=t.replace("{input}",'<div class="kv-temporary-input"></div>'),e.toggleMask&&(t=t.replace("{toggle}",e.renderToggle())),t},renderMeter:function(){var e,t=this,r=t.meterTemplate;return t.showMeter?(r=r.replace("{scorebar}",'<div class="'+t.scoreBarClass+'"></div>').replace("{score}",'<div class="'+t.scoreClass+'"></div>').replace("{verdict}",'<div class="'+t.verdictClass+'"></div>'),e=t.$element.attr("disabled")?t.meterClass+" kv-disabled":t.meterClass,'<div class="'+e+'">'+r+"</div>"):""}},e.fn.strength=function(t){var n=Array.apply(null,arguments),s=null;return n.shift(),this.each(function(){var a,o=e(this),i=o.data("strength"),c="object"==typeof t&&t,u=c.language||o.data("language")||"en";i||(a=e.extend({},e.fn.strength.defaults),"en"===u||r(e.fn.strengthLocales[u])||(a=e.extend(a,e.fn.strengthLocales[u])),i=new l(this,e.extend(a,c,e(this).data())),o.data("strength",i)),"string"==typeof t&&(s=i[t].apply(i,n))}),s||"score"===t||"verdict"===t||(s=this),s},e.fn.strength.defaults={language:"en",showMeter:!0,toggleMask:!0,inputTemplate:'<div class="input-group">\n{input}\n<span class="input-group-addon">{toggle}</span>\n</div>',inputNoToggleTemplate:"{input}",meterTemplate:'<div class="kv-scorebar-border">{scorebar}\n{score}</div>\n{verdict}',mainTemplate:'<table class="kv-strength-container"><tr>\n<td>{input}</td>\n<td class="kv-meter-container">{meter}</td>\n</tr></table>',meterClass:"kv-meter",scoreBarClass:"kv-scorebar",scoreClass:"kv-score",verdictClass:"kv-verdict",containerClass:"kv-password",inputClass:"form-control",toggleClass:"kv-toggle",verdictClasses:{0:"label label-default",1:"label label-danger",2:"label label-warning",3:"label label-info",4:"label label-primary",5:"label label-success"},rules:{midChar:2,consecAlphaUC:2,consecAlphaLC:2,consecNumber:2,seqAlpha:3,seqNumber:3,seqSymbol:3,length:4,number:4,symbol:6}},e.fn.strengthLocales.en={toggleTitle:"Show/Hide Password",verdictTitles:{0:"Too Short",1:"Very Weak",2:"Weak",3:"Good",4:"Strong",5:"Very Strong"}},e.extend(e.fn.strength.defaults,e.fn.strengthLocales.en),e.fn.strength.Constructor=l,e(function(){var t=e("input.strength[type=password]");t.length>0&&t.strength()})}(window.jQuery);